<?xml version="1.0"?>
<launch>
  <arg name="veh" default="wamv"/>

  <arg name="use_joy" default="true"/>

  <group ns="$(arg veh)">
    <node pkg="joy" type="joy_node" name="joy" if="$(arg use_joy)">
      <param name="dev" value="/dev/input/js0"/>
      <param name="deadzone" value="0.1"/>
      <param name="autorepeat_rate" value="10"/>
    </node>


    <node pkg="vrx_gazebo" type="wamv_mavlink_joy_teleop" name="wamv_mavlink_joy_teleop" output="screen">
      <remap from="~thrust_left" to="/$(arg veh)/thrusters/left_thrust_cmd"/>
      <remap from="~thrust_right" to="/$(arg veh)/thrusters/right_thrust_cmd"/>
      <remap from="~thrust_left_lateral" to="/$(arg veh)/thrusters/left_lateral_thrust_cmd"/>
      <remap from="~thrust_right_lateral" to="/$(arg veh)/thrusters/right_lateral_thrust_cmd"/>
      <remap from="mavros/cmd/arming" to="/mavros/cmd/arming"/>
      <remap from="mavros/cmd/land" to="/mavros/cmd/land"/>
      <remap from="mavros/set_mode" to="/mavros/set_mode"/>
      <remap from="mavros/param/set" to="/mavros/param/set"/>
      <remap from="mavros/param/get" to="/mavros/param/get"/>
      <remap from="~twist" to="/mavros/setpoint_velocity/cmd_vel_unstamped"/>
      <remap from="~joy" to="/$(arg veh)/joy"/>
    </node>
  </group>
</launch>
